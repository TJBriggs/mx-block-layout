import { __ } from '@wordpress/i18n';
import { useEffect } from '@wordpress/element';
import { BlockControls, InnerBlocks, useBlockProps } from '@wordpress/block-editor';
import { ToolbarGroup, ToolbarButton, ToolbarDropdownMenu } from '@wordpress/components';
import { ReactComponent as widthCenter } from '../../../icons/widthCenter.svg';
import { ReactComponent as widthFull } from '../../../icons/widthFull.svg';
//import './editor.scss';

const ALLOWED_BLOCKS = [  ];

const BLOCK_TEMPLATE = [ [ ] ];

export default function Edit({
	attributes: {
		widthIcon,
		widthOption
	},
	setAttributes
}) {

	useEffect(() => {
		// Set the layout icon on load
		if (widthOption === 'centered') {
			setAttributes({ widthIcon: widthCenter });
		} else {
			setAttributes({ widthIcon: widthFull });
		}
	}, []);

	const blockProps = useBlockProps( {
		className: `{{slug}} layout-width--${widthOption}`,
	} );

	return (
		<section { ...useBlockProps( blockProps ) }>
			<BlockControls>
				<ToolbarGroup>
					<ToolbarDropdownMenu
						icon={ widthIcon }
						label={ __('Change block width', 'mx-blocks-plugin') }
						controls={ [
							{
								title: 'Centered',
								icon: widthCenter,
								onClick: () => {
									setAttributes({
										widthOption: 'centered',
										widthIcon: widthCenter
									});
								}
							},
							{
								title: 'Full Width',
								icon: widthFull,
								onClick: () => {
									setAttributes({
										widthOption: 'full',
										widthIcon: widthFull
									});
								}
							},
						] }
					/>
				</ToolbarGroup>
			</BlockControls>
			{ __( '{{title}} â€“ hello from the editor!', 'mx-blocks-plugin' ) }
		</section>
	);
}